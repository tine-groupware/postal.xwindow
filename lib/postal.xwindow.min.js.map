{"version":3,"sources":["postal.xwindow.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_1__","__WEBPACK_EXTERNAL_MODULE_2__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequire","obj","__esModule","_","postal","_utils","_memoRemoteByInstanceId","_memoRemoteByTarget","_disconnectClient","safeSerialize","parseUri","_state","state","env","XWindowClient","getInstance","target","options","instanceId","fedx","transports","xwindow","eagerSerialize","useEagerSerialize","remotes","configure","cfg","config","defaults","extend","clearConfiguration","disconnect","clients","reduce","isArray","doNotNotify","each","without","apply","concat","getTargets","tidyStorage","sendMessage","envelope","cloneDeep","remote","wrapForTransport","packingSlip","JSON","stringify","unwrapFromTransport","msgData","indexOf","parse","ex","routeMessage","event","_this","parsed","newValue","find","x","store","namespace","localStoragePrefix","origin","get","push","url","protocol","authority","onMessage","signalReady","targets","callback","that","on","bind","keepAlive","length","def","targetId","sendPing","set","Date","getTime","targetTimeout","tidyRemotes","delay","Math","round","targetIds","getAll","memo","targetData","split","now","clear","isEmpty","proxy","tgt","client","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","entries","Symbol","iterator","next","done","_step$value","_slicedToArray","value","key","val","isPlainObject","err","str","o","parser","strictMode","exec","uri","i","q","name","replace","$0","$1","$2","arr","Array","Object","_arr","TypeError","defineProperty","regeneratorRuntime","mark","k","wrap","context$1$0","prev","keys","t0","finish","stop","strict","loose","location","host","isWorker","window","postMessage","test","navigator","userAgent","allowedOrigins","enabled","workers","_createClass","defineProperties","props","prop","configurable","writable","Constructor","protoProps","staticProps","prototype","_get","object","property","receiver","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","getter","_inherits","subClass","superClass","create","constructor","enumerable","__proto__","_classCallCheck","instance","_postal$fedx$FederationClient","_len","arguments","args","_key","transportName","shouldProcess","hasDomainFilters","contains","send","msg","FederationClient"],"mappings":"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","file":"postal.xwindow.min.js","sourcesContent":["/*!\n *  * postal.xwindow - postal.js/postal.federation plugin for federating instances of postal.js across unrelated window boundaries.\n *  * Author: Cornelius Weiß (http://www.metaways.de)\n *  * Version: v0.0.2\n *  * Url: http://github.com/tine20/postal.xwindow\n *  * License(s): (MIT OR GPL-2.0)\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"lodash\"), require(\"postal\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"lodash\", \"postal\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"postalXWindow\"] = factory(require(\"lodash\"), require(\"postal\"));\n\telse\n\t\troot[\"postalXWindow\"] = factory(root[\"_\"], root[\"postal\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// istanbul ignore next\n\t\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\t\n\tvar _ = _interopRequire(__webpack_require__(1));\n\t\n\tvar postal = _interopRequire(__webpack_require__(2));\n\t\n\tvar _utils = __webpack_require__(3);\n\t\n\tvar _memoRemoteByInstanceId = _utils._memoRemoteByInstanceId;\n\tvar _memoRemoteByTarget = _utils._memoRemoteByTarget;\n\tvar _disconnectClient = _utils._disconnectClient;\n\tvar safeSerialize = _utils.safeSerialize;\n\tvar parseUri = _utils.parseUri;\n\t\n\tvar _state = __webpack_require__(4);\n\t\n\tvar state = _state.state;\n\tvar env = _state.env;\n\t\n\tvar XWindowClient = _interopRequire(__webpack_require__(5));\n\t\n\tXWindowClient.getInstance = function (target, options, instanceId) {\n\t\treturn new XWindowClient(target, options, instanceId);\n\t};\n\t\n\tpostal.fedx.transports.xwindow = {\n\t\teagerSerialize: env.useEagerSerialize,\n\t\tremotes: [],\n\t\tXWindowClient: XWindowClient,\n\t\tconfigure: function configure(cfg) {\n\t\t\tif (cfg) {\n\t\t\t\tstate.config = _.defaults(_.extend(state.config, cfg), state.defaults);\n\t\t\t}\n\t\t\treturn state.config;\n\t\t},\n\t\tclearConfiguration: function clearConfiguration() {\n\t\t\tstate.config = _.extend({}, state.defaults);\n\t\t},\n\t\tdisconnect: function disconnect(options) {\n\t\t\toptions = options || {};\n\t\t\tvar clients = options.instanceId ?\n\t\t\t// an instanceId value or array was provided, let's get the client proxy instances for the id(s)\n\t\t\t_.reduce(_.isArray(options.instanceId) ? options.instanceId : [options.instanceId], _memoRemoteByInstanceId, [], this) :\n\t\t\t// Ok so we don't have instanceId(s), let's try target(s)\n\t\t\toptions.target ?\n\t\t\t// Ok, so we have a targets array, we need to iterate over it and get a list of the proxy/client instances\n\t\t\t_.reduce(_.isArray(options.target) ? options.target : [options.target], _memoRemoteByTarget, [], this) :\n\t\t\t// aww, heck - we don't have instanceId(s) or target(s), so it's ALL THE REMOTES\n\t\t\tthis.remotes;\n\t\t\tif (!options.doNotNotify) {\n\t\t\t\t_.each(clients, _disconnectClient, this);\n\t\t\t}\n\t\t\tthis.remotes = _.without.apply(null, [this.remotes].concat(clients));\n\t\t},\n\t\tgetTargets: function getTargets() {\n\t\t\treturn this.tidyStorage();\n\t\t},\n\t\tsendMessage: function sendMessage(env) {\n\t\t\tvar envelope = env;\n\t\t\tif (state.config.safeSerialize) {\n\t\t\t\tenvelope = safeSerialize(_.cloneDeep(env));\n\t\t\t}\n\t\t\tvar instanceId = postal.instanceId();\n\t\n\t\t\t_.each(this.remotes, function (remote) {\n\t\t\t\tif (remote.instanceId != instanceId) {\n\t\t\t\t\tremote.sendMessage(envelope);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\twrapForTransport: env.useEagerSerialize ? function (packingSlip) {\n\t\t\treturn JSON.stringify({\n\t\t\t\tpostal: true,\n\t\t\t\tpackingSlip: packingSlip\n\t\t\t});\n\t\t} : function (packingSlip) {\n\t\t\treturn {\n\t\t\t\tpostal: true,\n\t\t\t\tpackingSlip: packingSlip\n\t\t\t};\n\t\t},\n\t\tunwrapFromTransport: function unwrapFromTransport(msgData) {\n\t\t\tif (typeof msgData === \"string\" && (env.useEagerSerialize || msgData.indexOf(\"\\\"postal\\\":true\") !== -1)) {\n\t\t\t\ttry {\n\t\t\t\t\treturn JSON.parse(msgData);\n\t\t\t\t} catch (ex) {\n\t\t\t\t\treturn {};\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn msgData;\n\t\t\t}\n\t\t},\n\t\trouteMessage: function routeMessage(event) {\n\t\t\tvar _this = this;\n\t\n\t\t\tvar parsed = this.unwrapFromTransport(event.newValue);\n\t\n\t\t\tif (parsed && parsed.postal) {\n\t\t\t\tvar remote;\n\t\t\t\tvar target;\n\t\n\t\t\t\t(function () {\n\t\t\t\t\tvar packingSlip = parsed.packingSlip;\n\t\t\t\t\tvar instanceId = packingSlip.instanceId;\n\t\t\t\t\tif (packingSlip && instanceId != postal.instanceId()) {\n\t\t\t\t\t\tremote = _.find(_this.remotes, function (x) {\n\t\t\t\t\t\t\treturn x.instanceId === instanceId;\n\t\t\t\t\t\t});\n\t\n\t\t\t\t\t\tif (!remote) {\n\t\t\t\t\t\t\ttarget = store.namespace(state.config.localStoragePrefix + \".\" + instanceId);\n\t\n\t\t\t\t\t\t\tremote = XWindowClient.getInstance(target, { origin: target.get(\"targetUrl\") }, instanceId);\n\t\t\t\t\t\t\t_this.remotes.push(remote);\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t// origin forgery protection\n\t\t\t\t\t\tvar url = parseUri(event.url);\n\t\t\t\t\t\tvar origin = url.protocol + \"://\" + url.authority;\n\t\n\t\t\t\t\t\tif (remote.options.origin == origin) {\n\t\t\t\t\t\t\tremote.onMessage(packingSlip);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})();\n\t\t\t}\n\t\t},\n\t\tsignalReady: function signalReady(targets, callback) {\n\t\t\tvar instanceId = postal.instanceId();\n\t\t\tvar that = this;\n\t\n\t\t\tthis.target = store.namespace(state.config.localStoragePrefix + \".\" + instanceId);\n\t\t\tthis.target.on(\"message\", _.bind(this.routeMessage, this));\n\t\t\tthis.keepAlive();\n\t\n\t\t\ttargets = _.isArray(targets) ? targets : [targets];\n\t\t\ttargets = targets.length ? targets : this.getTargets();\n\t\t\tcallback = callback || function () {};\n\t\n\t\t\t_.each(targets, function (def) {\n\t\t\t\tif (def.targetId != instanceId) {\n\t\t\t\t\tvar remote = _.find(that.remotes, function (x) {\n\t\t\t\t\t\treturn x.instanceId === def.targetId;\n\t\t\t\t\t});\n\t\t\t\t\tif (!remote) {\n\t\t\t\t\t\tremote = XWindowClient.getInstance(def.target, { origin: def.origin }, def.targetId);\n\t\t\t\t\t\tthat.remotes.push(remote);\n\t\t\t\t\t}\n\t\t\t\t\tremote.sendPing(callback);\n\t\t\t\t}\n\t\t\t}, this);\n\t\t},\n\t\tkeepAlive: function keepAlive() {\n\t\t\tthis.target.set(\"targetUrl\", env.origin);\n\t\t\tthis.target.set(\"targetTimeout\", new Date().getTime() + state.config.targetTimeout);\n\t\n\t\t\tthis.tidyStorage();\n\t\t\tthis.tidyRemotes();\n\t\n\t\t\t_.delay(_.bind(this.keepAlive, this), Math.round(state.config.targetTimeout / 2));\n\t\t},\n\t\ttidyStorage: function tidyStorage() {\n\t\t\tvar targetIds = _.reduce(store.namespace(state.config.localStoragePrefix).getAll(), function (memo, targetData, id) {\n\t\t\t\tvar targetId = id.split(\".\")[0];\n\t\t\t\tif (_.indexOf(memo, targetId) < 0) {\n\t\t\t\t\tmemo.push(targetId);\n\t\t\t\t}\n\t\t\t\treturn memo;\n\t\t\t}, []);\n\t\n\t\t\tvar now = new Date().getTime();\n\t\t\treturn _.reduce(targetIds, function (memo, targetId) {\n\t\t\t\tvar target = store.namespace(state.config.localStoragePrefix + \".\" + targetId);\n\t\t\t\tif (target.get(\"targetTimeout\") < now) {\n\t\t\t\t\ttarget.clear();\n\t\t\t\t} else {\n\t\t\t\t\tmemo.push({\n\t\t\t\t\t\ttargetId: targetId,\n\t\t\t\t\t\ttarget: target,\n\t\t\t\t\t\torigin: target.get(\"targetUrl\")\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn memo;\n\t\t\t}, []);\n\t\t},\n\t\ttidyRemotes: function tidyRemotes() {\n\t\t\tvar that = this;\n\t\t\t_.each(this.remotes, function (remote) {\n\t\t\t\tif (_.isEmpty(remote.target.getAll())) {\n\t\t\t\t\tthat.disconnect({ target: remote.target });\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// istanbul ignore next\n\t\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\t\n\t// istanbul ignore next\n\t\n\tvar _slicedToArray = function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { var _arr = []; for (var _iterator = arr[Symbol.iterator](), _step; !(_step = _iterator.next()).done;) { _arr.push(_step.value); if (i && _arr.length === i) break; } return _arr; } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } };\n\t\n\texports._memoRemoteByInstanceId = _memoRemoteByInstanceId;\n\texports._memoRemoteByTarget = _memoRemoteByTarget;\n\texports._disconnectClient = _disconnectClient;\n\texports.safeSerialize = safeSerialize;\n\t\n\t// parseUri 1.2.2\n\t// (c) Steven Levithan <stevenlevithan.com>\n\t// MIT License\n\t\n\texports.parseUri = parseUri;\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _ = _interopRequire(__webpack_require__(1));\n\t\n\tfunction _memoRemoteByInstanceId(memo, instanceId) {\n\t\tvar proxy = _.find(this.remotes, function (x) {\n\t\t\treturn x.instanceId === instanceId;\n\t\t});\n\t\tif (proxy) {\n\t\t\tmemo.push(proxy);\n\t\t}\n\t\treturn memo;\n\t}\n\t\n\tfunction _memoRemoteByTarget(memo, tgt) {\n\t\tvar proxy = _.find(this.remotes, function (x) {\n\t\t\treturn x.target === tgt;\n\t\t});\n\t\tif (proxy) {\n\t\t\tmemo.push(proxy);\n\t\t}\n\t\treturn memo;\n\t}\n\t\n\tfunction _disconnectClient(client) {\n\t\tclient.disconnect();\n\t}\n\t\n\tfunction safeSerialize(envelope) {\n\t\tvar _iteratorNormalCompletion = true;\n\t\tvar _didIteratorError = false;\n\t\tvar _iteratorError = undefined;\n\t\n\t\ttry {\n\t\t\tfor (var _iterator = entries(envelope)[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\tvar _step$value = _slicedToArray(_step.value, 2);\n\t\n\t\t\t\tvar key = _step$value[0];\n\t\t\t\tvar val = _step$value[1];\n\t\n\t\t\t\tif (typeof val === \"function\") {\n\t\t\t\t\tdelete envelope[key];\n\t\t\t\t}\n\t\t\t\tif (_.isPlainObject(val)) {\n\t\t\t\t\tsafeSerialize(val);\n\t\t\t\t}\n\t\t\t\tif (_.isArray(val)) {\n\t\t\t\t\t_.each(val, safeSerialize);\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError = true;\n\t\t\t_iteratorError = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion && _iterator[\"return\"]) {\n\t\t\t\t\t_iterator[\"return\"]();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\treturn envelope;\n\t}\n\t\n\tvar entries = regeneratorRuntime.mark(function entries(obj) {\n\t\tvar _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, k;\n\t\n\t\treturn regeneratorRuntime.wrap(function entries$(context$1$0) {\n\t\t\twhile (1) switch (context$1$0.prev = context$1$0.next) {\n\t\t\t\tcase 0:\n\t\t\t\t\tif ([\"object\", \"function\"].indexOf(typeof obj) === -1) {\n\t\t\t\t\t\tobj = {};\n\t\t\t\t\t}\n\t\t\t\t\t_iteratorNormalCompletion = true;\n\t\t\t\t\t_didIteratorError = false;\n\t\t\t\t\t_iteratorError = undefined;\n\t\t\t\t\tcontext$1$0.prev = 4;\n\t\t\t\t\t_iterator = Object.keys(obj)[Symbol.iterator]();\n\t\n\t\t\t\tcase 6:\n\t\t\t\t\tif (_iteratorNormalCompletion = (_step = _iterator.next()).done) {\n\t\t\t\t\t\tcontext$1$0.next = 13;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tk = _step.value;\n\t\t\t\t\tcontext$1$0.next = 10;\n\t\t\t\t\treturn [k, obj[k]];\n\t\n\t\t\t\tcase 10:\n\t\t\t\t\t_iteratorNormalCompletion = true;\n\t\t\t\t\tcontext$1$0.next = 6;\n\t\t\t\t\tbreak;\n\t\n\t\t\t\tcase 13:\n\t\t\t\t\tcontext$1$0.next = 19;\n\t\t\t\t\tbreak;\n\t\n\t\t\t\tcase 15:\n\t\t\t\t\tcontext$1$0.prev = 15;\n\t\t\t\t\tcontext$1$0.t0 = context$1$0[\"catch\"](4);\n\t\t\t\t\t_didIteratorError = true;\n\t\t\t\t\t_iteratorError = context$1$0.t0;\n\t\n\t\t\t\tcase 19:\n\t\t\t\t\tcontext$1$0.prev = 19;\n\t\t\t\t\tcontext$1$0.prev = 20;\n\t\n\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator[\"return\"]) {\n\t\t\t\t\t\t_iterator[\"return\"]();\n\t\t\t\t\t}\n\t\n\t\t\t\tcase 22:\n\t\t\t\t\tcontext$1$0.prev = 22;\n\t\n\t\t\t\t\tif (!_didIteratorError) {\n\t\t\t\t\t\tcontext$1$0.next = 25;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tthrow _iteratorError;\n\t\n\t\t\t\tcase 25:\n\t\t\t\t\treturn context$1$0.finish(22);\n\t\n\t\t\t\tcase 26:\n\t\t\t\t\treturn context$1$0.finish(19);\n\t\n\t\t\t\tcase 27:\n\t\t\t\tcase \"end\":\n\t\t\t\t\treturn context$1$0.stop();\n\t\t\t}\n\t\t}, entries, this, [[4, 15, 19, 27], [20,, 22, 26]]);\n\t});exports.entries = entries;\n\t\n\tfunction parseUri(str) {\n\t\tvar o = parseUri.options;\n\t\tvar m = o.parser[o.strictMode ? \"strict\" : \"loose\"].exec(str);\n\t\tvar uri = {};\n\t\tvar i = 14;\n\t\n\t\twhile (i--) {\n\t\t\turi[o.key[i]] = m[i] || \"\";\n\t\t}\n\t\n\t\turi[o.q.name] = {};\n\t\turi[o.key[12]].replace(o.q.parser, function ($0, $1, $2) {\n\t\t\tif ($1) {\n\t\t\t\turi[o.q.name][$1] = $2;\n\t\t\t}\n\t\t});\n\t\n\t\treturn uri;\n\t}\n\t\n\t;\n\t\n\tparseUri.options = {\n\t\tstrictMode: false,\n\t\tkey: [\"source\", \"protocol\", \"authority\", \"userInfo\", \"user\", \"password\", \"host\", \"port\", \"relative\", \"path\", \"directory\", \"file\", \"query\", \"anchor\"],\n\t\tq: {\n\t\t\tname: \"queryKey\",\n\t\t\tparser: /(?:^|&)([^&=]*)=?([^&]*)/g\n\t\t},\n\t\tparser: {\n\t\t\tstrict: /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,\n\t\t\tloose: /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/\n\t\t}\n\t};\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// istanbul ignore next\n\t\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\t\n\tvar _ = _interopRequire(__webpack_require__(1));\n\t\n\tvar env = {\n\t\torigin: location.origin || location.protocol + \"//\" + location.host,\n\t\tisWorker: typeof window === \"undefined\" && postMessage && location,\n\t\t// I know, I KNOW. The alternative was very expensive perf & time-wise\n\t\t// so I saved you a perf hit by checking the stinking UA. Sigh.\n\t\t// I sought the opinion of several other devs. We all traveled\n\t\t// to the far east to consult with the wisdom of a monk - turns\n\t\t// out he didn\"t know JavaScript, and our passports were stolen on the\n\t\t// return trip. We stowed away aboard a freighter headed back to the\n\t\t// US and by the time we got back, no one had heard of IE 8 or 9. True story.\n\t\tuseEagerSerialize: /MSIE [8,9]/.test(navigator.userAgent)\n\t};\n\t\n\texports.env = env;\n\tvar defaults = {\n\t\tallowedOrigins: [env.origin],\n\t\tenabled: true,\n\t\tsafeSerialize: false,\n\t\tlocalStoragePrefix: \"postal.fedx.xwindow\",\n\t\ttargetTimeout: 60000 // 1 minute\n\t};\n\t\n\tvar state = {\n\t\tworkers: [],\n\t\tconfig: _.extend({}, defaults),\n\t\tdefaults: defaults\n\t};\n\texports.state = state;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// istanbul ignore next\n\t\n\tvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\t\n\t// istanbul ignore next\n\t\n\tvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\t\n\t// istanbul ignore next\n\t\n\tvar _get = function get(object, property, receiver) { var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc && desc.writable) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\t\n\t// istanbul ignore next\n\t\n\tvar _inherits = function (subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) subClass.__proto__ = superClass; };\n\t\n\t// istanbul ignore next\n\t\n\tvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\t\n\tvar postal = _interopRequire(__webpack_require__(2));\n\t\n\tvar _ = _interopRequire(__webpack_require__(1));\n\t\n\tvar _state = __webpack_require__(4);\n\t\n\tvar state = _state.state;\n\tvar env = _state.env;\n\t\n\tvar XWindowClient = (function (_postal$fedx$FederationClient) {\n\t\tfunction XWindowClient() {\n\t\t\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t\t\targs[_key] = arguments[_key];\n\t\t\t}\n\t\n\t\t\t_classCallCheck(this, XWindowClient);\n\t\n\t\t\tthis.transportName = \"xwindow\";\n\t\t\t_get(Object.getPrototypeOf(XWindowClient.prototype), \"constructor\", this).apply(this, args);\n\t\t}\n\t\n\t\t_inherits(XWindowClient, _postal$fedx$FederationClient);\n\t\n\t\t_createClass(XWindowClient, {\n\t\t\tshouldProcess: {\n\t\t\t\tvalue: function shouldProcess() {\n\t\t\t\t\tvar hasDomainFilters = !!state.config.allowedOrigins.length;\n\t\t\t\t\treturn state.config.enabled && (this.options.origin === \"*\" || (hasDomainFilters && _.contains(state.config.allowedOrigins, this.options.origin) || !hasDomainFilters) || this.options.isWorker && _.contains(state.workers, this.target) ||\n\t\t\t\t\t// we are in a worker\n\t\t\t\t\tenv.isWorker);\n\t\t\t\t}\n\t\t\t},\n\t\t\tsend: {\n\t\t\t\tvalue: function send(packingSlip) {\n\t\t\t\t\tif (this.shouldProcess()) {\n\t\t\t\t\t\tvar msg = postal.fedx.transports.xwindow.wrapForTransport(packingSlip);\n\t\t\t\t\t\tthis.target.set(\"message\", msg);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\n\t\treturn XWindowClient;\n\t})(postal.fedx.FederationClient);\n\t\n\tmodule.exports = XWindowClient;\n\t\n\t// another frame/window\n\n\t// worker\n\n/***/ }\n/******/ ])\n});\n;"],"sourceRoot":"/source/"}